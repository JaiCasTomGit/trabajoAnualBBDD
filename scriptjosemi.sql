-- BORRAR TABLAS SI EXISTEN
DROP TABLE DROP_ENEMIGO_ITEM CASCADE CONSTRAINTS;
DROP TABLE COPIAS_ARMAS CASCADE CONSTRAINTS;
DROP TABLE ARMA CASCADE CONSTRAINTS;
DROP TABLE OBJETO_USABLE CASCADE CONSTRAINTS;
DROP TABLE ITEM CASCADE CONSTRAINTS;
DROP TABLE INVENTARIO CASCADE CONSTRAINTS;
DROP TABLE ENMBASICO CASCADE CONSTRAINTS;
DROP TABLE JEFE CASCADE CONSTRAINTS;
DROP TABLE ENEMIGO CASCADE CONSTRAINTS;
DROP TABLE MAPA CASCADE CONSTRAINTS;
DROP TABLE EST_JUGADOR CASCADE CONSTRAINTS;
DROP TABLE ESTADISTICAS_CLASE CASCADE CONSTRAINTS;
DROP TABLE CLASE_CABALLERO CASCADE CONSTRAINTS;
DROP TABLE CLASE_MAGO CASCADE CONSTRAINTS;
DROP TABLE CLASE_GUERRERO CASCADE CONSTRAINTS;
DROP TABLE JUGADOR CASCADE CONSTRAINTS;
DROP TABLE CLASE CASCADE CONSTRAINTS;

-- COMENTARIO: TABLA CLASE
CREATE TABLE CLASE (
    codigoClase NUMBER(3) PRIMARY KEY,
    nomClase VARCHAR2(20)
);

-- COMENTARIO: TABLA CLASES ESPECIFICAS
CREATE TABLE CLASE_GUERRERO (
    codigoClase NUMBER(3) PRIMARY KEY,
    CONSTRAINT fk_clase_guerrero FOREIGN KEY (codigoClase)
        REFERENCES CLASE(codigoClase)
);
CREATE TABLE CLASE_MAGO (
    codigoClase NUMBER(3) PRIMARY KEY,
    CONSTRAINT fk_clase_mago FOREIGN KEY (codigoClase)
        REFERENCES CLASE(codigoClase)
);
CREATE TABLE CLASE_CABALLERO (
    codigoClase NUMBER(3) PRIMARY KEY,
    CONSTRAINT fk_clase_caballero FOREIGN KEY (codigoClase)
        REFERENCES CLASE(codigoClase)
);

-- COMENTARIO: TABLA JUGADOR
CREATE TABLE JUGADOR (
    codigoJugador NUMBER(3) PRIMARY KEY,
    nombre VARCHAR2(40),
    nivel NUMBER(2),
    codigoClase NUMBER(3),
    CONSTRAINT fk_jugador_clase FOREIGN KEY (codigoClase)
        REFERENCES CLASE(codigoClase)
);

-- COMENTARIO: TABLA ESTADISTICAS_CLASE
CREATE TABLE ESTADISTICAS_CLASE (
    codigoClase NUMBER(3) PRIMARY KEY,
    fuerza_base NUMBER(3),
    destreza_base NUMBER(3),
    arcano_base NUMBER(3),
    agilidad_base NUMBER(3),
    salud_base NUMBER(3),
    CONSTRAINT fk_estadisticas_clase FOREIGN KEY (codigoClase)
        REFERENCES CLASE(codigoClase)
);

-- COMENTARIO: TABLA EST_JUGADOR
CREATE TABLE EST_JUGADOR (
    codigoJugador NUMBER(3) PRIMARY KEY,
    fuerza NUMBER(3),
    destreza NUMBER(3),
    arcano NUMBER(3),
    agilidad NUMBER(3),
    salud NUMBER(3),
    puntos_disponibles NUMBER(3),
    CONSTRAINT fk_est_jugador FOREIGN KEY (codigoJugador)
        REFERENCES JUGADOR(codigoJugador)
);

-- COMENTARIO: TABLA MAPA
CREATE TABLE MAPA (
    codigoMapa NUMBER(3) PRIMARY KEY
);

-- COMENTARIO: TABLA INVENTARIO (XOR jugador/mapa)
CREATE TABLE INVENTARIO (
    codigoInventario NUMBER(3) PRIMARY KEY,
    tipoInventario VARCHAR2(50),
    codigoJugador NUMBER(3),
    codigoMapa NUMBER(3),
    CONSTRAINT fk_inventario_jugador FOREIGN KEY (codigoJugador)
        REFERENCES JUGADOR(codigoJugador),
    CONSTRAINT fk_inventario_mapa FOREIGN KEY (codigoMapa)
        REFERENCES MAPA(codigoMapa),
    CONSTRAINT chk_inventario_xor CHECK (
        (codigoJugador IS NOT NULL AND codigoMapa IS NULL) OR
        (codigoJugador IS NULL AND codigoMapa IS NOT NULL)
    )
);

-- COMENTARIO: TABLA ITEM
CREATE TABLE ITEM (
    codItem NUMBER(3) PRIMARY KEY,
    codigoInventario NUMBER(3),
    nomItem VARCHAR2(100),
    tipoItem VARCHAR2(50),
    CONSTRAINT fk_item_inventario FOREIGN KEY (codigoInventario)
        REFERENCES INVENTARIO(codigoInventario),
    CONSTRAINT chk_tipoItem CHECK (tipoItem IN ('ARMA','OBJETO_USABLE'))
);

-- COMENTARIO: TABLA ARMA (subtipo de ITEM)
CREATE TABLE ARMA (
    codItem NUMBER(3) PRIMARY KEY,
    dano NUMBER(3),
    CONSTRAINT fk_arma_item FOREIGN KEY (codItem)
        REFERENCES ITEM(codItem)
);

-- COMENTARIO: TABLA OBJETO_USABLE (subtipo de ITEM)
CREATE TABLE OBJETO_USABLE (
    codItem NUMBER(3) PRIMARY KEY,
    descripcion VARCHAR2(100),
    CONSTRAINT fk_objeto_item FOREIGN KEY (codItem)
        REFERENCES ITEM(codItem)
);

-- COMENTARIO: TABLA COPIAS_ARMAS
CREATE TABLE COPIAS_ARMAS (
    codItem NUMBER(3) PRIMARY KEY,
    numCopias NUMBER(3),
    CONSTRAINT fk_copias_armas FOREIGN KEY (codItem)
        REFERENCES ARMA(codItem)
);

-- COMENTARIO: TABLA ENEMIGO
CREATE TABLE ENEMIGO (
    codigoEnemigo NUMBER(3) PRIMARY KEY,
    nombre VARCHAR2(100)
);

-- COMENTARIO: TABLA JEFE (subtipo ENEMIGO)
CREATE TABLE JEFE (
    codigoEnemigo NUMBER(3) PRIMARY KEY,
    CONSTRAINT fk_jefe_enemigo FOREIGN KEY (codigoEnemigo)
        REFERENCES ENEMIGO(codigoEnemigo)
);

-- COMENTARIO: TABLA ENMBASICO (subtipo ENEMIGO)
CREATE TABLE ENMBASICO (
    codigoEnemigo NUMBER(3) PRIMARY KEY,
    CONSTRAINT fk_enmbasico_enemigo FOREIGN KEY (codigoEnemigo)
        REFERENCES ENEMIGO(codigoEnemigo)
);

-- COMENTARIO: TABLA DROP_ENEMIGO_ITEM
CREATE TABLE DROP_ENEMIGO_ITEM (
    codigoEnemigo NUMBER(3),
    codItem NUMBER(3),
    cantidadMin NUMBER(3),
    cantidadMax NUMBER(3),
    probabilidad NUMBER(3),
    PRIMARY KEY (codigoEnemigo,codItem),
    CONSTRAINT fk_drop_enemigo FOREIGN KEY (codigoEnemigo)
        REFERENCES ENEMIGO(codigoEnemigo),
    CONSTRAINT fk_drop_item FOREIGN KEY (codItem)
        REFERENCES ITEM(codItem)
);

-- INSERTS DE EJEMPLO COHERENTES

-- CLASE
INSERT INTO CLASE VALUES (1,'Guerrero');
INSERT INTO CLASE VALUES (2,'Mago');
INSERT INTO CLASE VALUES (3,'Caballero');
INSERT INTO CLASE VALUES (4,'Arquero');
INSERT INTO CLASE VALUES (5,'Asesino');
INSERT INTO CLASE VALUES (6,'Clerigo');
INSERT INTO CLASE VALUES (7,'Paladin');
INSERT INTO CLASE VALUES (8,'Nigromante');
INSERT INTO CLASE VALUES (9,'Berserker');
INSERT INTO CLASE VALUES (10,'Monje');

-- CLASES ESPECIFICAS
INSERT INTO CLASE_GUERRERO VALUES (1);
INSERT INTO CLASE_MAGO VALUES (2);
INSERT INTO CLASE_CABALLERO VALUES (3);

-- JUGADOR
INSERT INTO JUGADOR VALUES (1,'Aldric',15,1);
INSERT INTO JUGADOR VALUES (2,'Selene',20,2);
INSERT INTO JUGADOR VALUES (3,'Kael',18,3);
INSERT INTO JUGADOR VALUES (4,'Mira',22,4);
INSERT INTO JUGADOR VALUES (5,'Thorn',30,5);
INSERT INTO JUGADOR VALUES (6,'Luna',12,6);
INSERT INTO JUGADOR VALUES (7,'Drake',25,7);
INSERT INTO JUGADOR VALUES (8,'Ragnar',35,8);
INSERT INTO JUGADOR VALUES (9,'Eira',16,9);
INSERT INTO JUGADOR VALUES (10,'Zane',19,10);

-- ESTADISTICAS_CLASE
INSERT INTO ESTADISTICAS_CLASE VALUES (1,15,10,5,8,20);
INSERT INTO ESTADISTICAS_CLASE VALUES (2,5,8,20,10,12);
INSERT INTO ESTADISTICAS_CLASE VALUES (3,18,12,8,7,25);
INSERT INTO ESTADISTICAS_CLASE VALUES (4,8,15,7,18,14);
INSERT INTO ESTADISTICAS_CLASE VALUES (5,10,18,5,20,12);
INSERT INTO ESTADISTICAS_CLASE VALUES (6,7,8,15,9,18);
INSERT INTO ESTADISTICAS_CLASE VALUES (7,12,14,10,15,17);
INSERT INTO ESTADISTICAS_CLASE VALUES (8,6,9,22,10,13);
INSERT INTO ESTADISTICAS_CLASE VALUES (9,22,12,4,7,30);
INSERT INTO ESTADISTICAS_CLASE VALUES (10,9,11,18,12,16);

-- EST_JUGADOR
INSERT INTO EST_JUGADOR VALUES (1,20,12,6,10,30,5);
INSERT INTO EST_JUGADOR VALUES (2,6,10,28,12,18,4);
INSERT INTO EST_JUGADOR VALUES (3,12,22,8,20,19,6);
INSERT INTO EST_JUGADOR VALUES (4,15,25,7,22,17,3);
INSERT INTO EST_JUGADOR VALUES (5,10,12,20,11,35,8);
INSERT INTO EST_JUGADOR VALUES (6,22,14,10,9,28,4);
INSERT INTO EST_JUGADOR VALUES (7,8,11,30,13,20,7);
INSERT INTO EST_JUGADOR VALUES (8,30,16,5,10,45,10);
INSERT INTO EST_JUGADOR VALUES (9,11,15,24,18,21,5);
INSERT INTO EST_JUGADOR VALUES (10,18,20,12,22,23,6);

-- MAPA
INSERT INTO MAPA VALUES (1);
INSERT INTO MAPA VALUES (2);
INSERT INTO MAPA VALUES (3);
INSERT INTO MAPA VALUES (4);
INSERT INTO MAPA VALUES (5);
INSERT INTO MAPA VALUES (6);
INSERT INTO MAPA VALUES (7);
INSERT INTO MAPA VALUES (8);
INSERT INTO MAPA VALUES (9);
INSERT INTO MAPA VALUES (10);

-- ENEMIGO (20 en total para cubrir 10 básicos + 10 jefes)
INSERT INTO ENEMIGO VALUES (1,'Goblin');
INSERT INTO ENEMIGO VALUES (2,'Orco');
INSERT INTO ENEMIGO VALUES (3,'Troll');
INSERT INTO ENEMIGO VALUES (4,'Espectro');
INSERT INTO ENEMIGO VALUES (5,'Lobo');
INSERT INTO ENEMIGO VALUES (6,'Serpiente');
INSERT INTO ENEMIGO VALUES (7,'Dragón');
INSERT INTO ENEMIGO VALUES (8,'Golem');
INSERT INTO ENEMIGO VALUES (9,'Vampiro');
INSERT INTO ENEMIGO VALUES (10,'Hiena');
INSERT INTO ENEMIGO VALUES (11,'Minotauro');
INSERT INTO ENEMIGO VALUES (12,'Quimera');
INSERT INTO ENEMIGO VALUES (13,'Manticora');
INSERT INTO ENEMIGO VALUES (14,'Esqueleto');
INSERT INTO ENEMIGO VALUES (15,'Fantasma');
INSERT INTO ENEMIGO VALUES (16,'Murciélago');
INSERT INTO ENEMIGO VALUES (17,'Tiburón');
INSERT INTO ENEMIGO VALUES (18,'Araña Gigante');
INSERT INTO ENEMIGO VALUES (19,'Serpiente Marina');
INSERT INTO ENEMIGO VALUES (20,'Ogro');

-- JEFE (10 registros)
INSERT INTO JEFE VALUES (7);
INSERT INTO JEFE VALUES (3);
INSERT INTO JEFE VALUES (11);
INSERT INTO JEFE VALUES (12);
INSERT INTO JEFE VALUES (13);
INSERT INTO JEFE VALUES (14);
INSERT INTO JEFE VALUES (15);
INSERT INTO JEFE VALUES (16);
INSERT INTO JEFE VALUES (17);
INSERT INTO JEFE VALUES (18);
INSERT INTO JEFE VALUES (19);
INSERT INTO JEFE VALUES (20);

-- ENMBASICO (10 registros)
INSERT INTO ENMBASICO VALUES (1);
INSERT INTO ENMBASICO VALUES (2);
INSERT INTO ENMBASICO VALUES (4);
INSERT INTO ENMBASICO VALUES (5);
INSERT INTO ENMBASICO VALUES (6);
INSERT INTO ENMBASICO VALUES (8);
INSERT INTO ENMBASICO VALUES (9);
INSERT INTO ENMBASICO VALUES (10);
INSERT INTO ENMBASICO VALUES (3);
INSERT INTO ENMBASICO VALUES (12);

-- INVENTARIO (10 jugador + 10 mundo)
INSERT INTO INVENTARIO VALUES (1,'Jugador',1,NULL);
INSERT INTO INVENTARIO VALUES (2,'Jugador',2,NULL);
INSERT INTO INVENTARIO VALUES (3,'Jugador',3,NULL);
INSERT INTO INVENTARIO VALUES (4,'Jugador',4,NULL);
INSERT INTO INVENTARIO VALUES (5,'Jugador',5,NULL);
INSERT INTO INVENTARIO VALUES (6,'Jugador',6,NULL);
INSERT INTO INVENTARIO VALUES (7,'Jugador',7,NULL);
INSERT INTO INVENTARIO VALUES (8,'Jugador',8,NULL);
INSERT INTO INVENTARIO VALUES (9,'Jugador',9,NULL);
INSERT INTO INVENTARIO VALUES (10,'Jugador',10,NULL);
INSERT INTO INVENTARIO VALUES (11,'Mundo',NULL,1);
INSERT INTO INVENTARIO VALUES (12,'Mundo',NULL,2);
INSERT INTO INVENTARIO VALUES (13,'Mundo',NULL,3);
INSERT INTO INVENTARIO VALUES (14,'Mundo',NULL,4);
INSERT INTO INVENTARIO VALUES (15,'Mundo',NULL,5);
INSERT INTO INVENTARIO VALUES (16,'Mundo',NULL,6);
INSERT INTO INVENTARIO VALUES (17,'Mundo',NULL,7);
INSERT INTO INVENTARIO VALUES (18,'Mundo',NULL,8);
INSERT INTO INVENTARIO VALUES (19,'Mundo',NULL,9);
INSERT INTO INVENTARIO VALUES (20,'Mundo',NULL,10);

-- ITEM (10 ARMA + 10 OBJETO_USABLE)
INSERT INTO ITEM VALUES (1,1,'Espada basica','ARMA');
INSERT INTO ITEM VALUES (2,2,'Baculo magico','ARMA');
INSERT INTO ITEM VALUES (3,3,'Arco largo','ARMA');
INSERT INTO ITEM VALUES (4,4,'Daga oscura','ARMA');
INSERT INTO ITEM VALUES (5,5,'Martillo sagrado','ARMA');
INSERT INTO ITEM VALUES (6,6,'Mazo','ARMA');
INSERT INTO ITEM VALUES (7,7,'Hacha','ARMA');
INSERT INTO ITEM VALUES (8,8,'Lanza','ARMA');
INSERT INTO ITEM VALUES (9,9,'Katana','ARMA');
INSERT INTO ITEM VALUES (10,10,'Espadon','ARMA');
INSERT INTO ITEM VALUES (11,11,'Poción vida','OBJETO_USABLE');
INSERT INTO ITEM VALUES (12,12,'Poción maná','OBJETO_USABLE');
INSERT INTO ITEM VALUES (13,13,'Pergamino','OBJETO_USABLE');
INSERT INTO ITEM VALUES (14,14,'Antídoto','OBJETO_USABLE');
INSERT INTO ITEM VALUES (15,15,'Anillo','OBJETO_USABLE');
INSERT INTO ITEM VALUES (16,16,'Collar','OBJETO_USABLE');
INSERT INTO ITEM VALUES (17,17,'Pergamino de fuego','OBJETO_USABLE');
INSERT INTO ITEM VALUES (18,18,'Bomba','OBJETO_USABLE');
INSERT INTO ITEM VALUES (19,19,'Capa','OBJETO_USABLE');
INSERT INTO ITEM VALUES (20,20,'Guantes','OBJETO_USABLE');

-- ARMA
INSERT INTO ARMA VALUES (1,50);
INSERT INTO ARMA VALUES (2,70);
INSERT INTO ARMA VALUES (3,60);
INSERT INTO ARMA VALUES (4,55);
INSERT INTO ARMA VALUES (5,80);
INSERT INTO ARMA VALUES (6,65);
INSERT INTO ARMA VALUES (7,75);
INSERT INTO ARMA VALUES (8,68);
INSERT INTO ARMA VALUES (9,72);
INSERT INTO ARMA VALUES (10,90);

-- OBJETO_USABLE
INSERT INTO OBJETO_USABLE VALUES (11,'Restaura 50HP');
INSERT INTO OBJETO_USABLE VALUES (12,'Restaura 30MP');
INSERT INTO OBJETO_USABLE VALUES (13,'Hechizo fuego');
INSERT INTO OBJETO_USABLE VALUES (14,'Cura veneno');
INSERT INTO OBJETO_USABLE VALUES (15,'Aumenta defensa');
INSERT INTO OBJETO_USABLE VALUES (16,'Protección mágica');
INSERT INTO OBJETO_USABLE VALUES (17,'Pergamino de hielo');
INSERT INTO OBJETO_USABLE VALUES (18,'Explosivo');
INSERT INTO OBJETO_USABLE VALUES (19,'Capa de invisibilidad');
INSERT INTO OBJETO_USABLE VALUES (20,'Guantes de fuerza');

-- COPIAS_ARMAS
INSERT INTO COPIAS_ARMAS VALUES (1,2);
INSERT INTO COPIAS_ARMAS VALUES (2,1);
INSERT INTO COPIAS_ARMAS VALUES (3,3);
INSERT INTO COPIAS_ARMAS VALUES (4,2);
INSERT INTO COPIAS_ARMAS VALUES (5,1);
INSERT INTO COPIAS_ARMAS VALUES (6,2);
INSERT INTO COPIAS_ARMAS VALUES (7,1);
INSERT INTO COPIAS_ARMAS VALUES (8,3);
INSERT INTO COPIAS_ARMAS VALUES (9,2);
INSERT INTO COPIAS_ARMAS VALUES (10,1);

-- DROP_ENEMIGO_ITEM
INSERT INTO DROP_ENEMIGO_ITEM VALUES (1,1,1,1,80);
INSERT INTO DROP_ENEMIGO_ITEM VALUES (2,2,1,2,50);
INSERT INTO DROP_ENEMIGO_ITEM VALUES (3,3,1,1,60);
INSERT INTO DROP_ENEMIGO_ITEM VALUES (4,4,1,1,40);
INSERT INTO DROP_ENEMIGO_ITEM VALUES (5,5,1,1,70);
INSERT INTO DROP_ENEMIGO_ITEM VALUES (6,6,1,1,90);
INSERT INTO DROP_ENEMIGO_ITEM VALUES (7,7,1,1,100);
INSERT INTO DROP_ENEMIGO_ITEM VALUES (8,8,1,1,30);
INSERT INTO DROP_ENEMIGO_ITEM VALUES (9,9,1,1,20);
INSERT INTO DROP_ENEMIGO_ITEM VALUES (10,10,1,1,10);
INSERT INTO DROP_ENEMIGO_ITEM VALUES (11,11,1,1,50);
INSERT INTO DROP_ENEMIGO_ITEM VALUES (12,12,1,1,60);
INSERT INTO DROP_ENEMIGO_ITEM VALUES (13,13,1,1,40);
INSERT INTO DROP_ENEMIGO_ITEM VALUES (14,14,1,1,30);
INSERT INTO DROP_ENEMIGO_ITEM VALUES (15,15,1,1,25);
INSERT INTO DROP_ENEMIGO_ITEM VALUES (16,16,1,1,20);
INSERT INTO DROP_ENEMIGO_ITEM VALUES (17,17,1,1,15);
INSERT INTO DROP_ENEMIGO_ITEM VALUES (18,18,1,1,10);
INSERT INTO DROP_ENEMIGO_ITEM VALUES (19,19,1,1,5);
INSERT INTO DROP_ENEMIGO_ITEM VALUES (20,20,1,1,5);

COMMIT;